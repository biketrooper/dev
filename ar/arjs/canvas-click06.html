<!doctype HTML>
<html>
	<head>
<link rel="icon" href="data:;base64,iVBORw0KGgo=">
<script src="js/aframe.min.js"></script>
<script src="js/aframe-ar.js"></script>
<script>
AFRAME.registerComponent('change-color-on-hover', {
    schema: {
        color: {default: 'red'}
    },

    init: function () {
        var data = this.data;
        var el = this.el;  // <a-box>
        var defaultColor = el.getAttribute('material').color;

        el.addEventListener('mouseenter', function () {
        el.setAttribute('color', data.color);
        });

        el.addEventListener('mouseleave', function () {
        el.setAttribute('color', defaultColor);
        });

        el.addEventListener('click', function () {
            el.setAttribute('color','green');
            ush();
        });
    }
});
AFRAME.registerComponent('logoCelepar', {
    schema: {
        color: {default: 'red'}
    },

    init: function () {
        var data = this.data;
        var el = this.el;

        el.addEventListener('click', function () {
            //el.setAttribute('color', data.color);
            cel3.setAttribute('animation','property: scale; pauseEvents: rotation;  to:.2 .2 .2; loop: true; dur: 8000; dir:alternate');
            cel3.setAttribute('scale','2 2 2');
        });

        // el.addEventListener('mouseleave', function () {
        //     el.setAttribute('color', defaultColor);
        // });

        // el.addEventListener('click', function () {
        //     el.setAttribute('color','green');
        //     ush();
        // });
    }
});

  
AFRAME.registerComponent("foo", {
	init: function() {
		/*let anim = document.getElementById("klop")

		anim.addEventListener("click", (e) => {
			console.log("hello")
			this.el.emit("bar")
			anim.emit("fallclick")
        });*/
        

	var scaleBtn = document.getElementById("btn-scale");
	var maf3 = document.getElementById("maf3");
	var cel3 = document.getElementById("cel3");


	/*scaleBtn.addEventListener('click', function() {
		if (scaleFlag == 0){
			scaleFlag = 1;
			maf3.setAttribute("scale", scale="1 1 1");
		} else if (scaleFlag == 1) {
			scaleFlag = 0;
			maf3.setAttribute("scale", scale=".55 .55 .55");
		}
	});*/

	cel3.addEventListener('click', function() {
        ush();
	});
    

	}
})

var scaleFlag = 0;
var rotateFlag = 0;

function ush() {

	var scaleBtn = document.getElementById("btn-scale");
	var maf3 = document.getElementById("maf3");
    var cel3 = document.getElementById("cel3");
    
    if (rotateFlag == 0){
			maf3.emit('rotate');
			rotateFlag = 1;
			maf3.setAttribute('animation','property: rotation; pauseEvents: rotation; to: 0 360 0; loop: true; dur: 8000; dir:alternate');
			maf3.setAttribute('animation__2','property: scale; pauseEvents: rotation;  to:1 1 1; loop: true; dur: 8000; dir:alternate');
			cel3.setAttribute('animation__3','property: scale; pauseEvents: rotation;  to:.2 .2 .2; loop: true; dur: 8000; dir:alternate');
		} else {
			maf3.emit('rotation-pause');
			rotateFlag = 0;
			maf3.setAttribute('animation','property: rotation; pauseEvents: rotation-pause;  to: 0 0 0; dur: 3000; dir:alternate');
			maf3.setAttribute('animation__2','property: scale;  pauseEvents: rotation-pause; to:.5 .5 .5; dur: 3000');
			cel3.setAttribute('animation__3','property: scale;  pauseEvents: rotation-pause; to:.5 .5 .5; dur: 3000');
		}
}
window.onload = function() {
	var scaleBtn = document.getElementById("btn-scale");
	var maf3 = document.getElementById("maf3");
	var cel3 = document.getElementById("cel3");

	var scaleFlag = 0;
	var rotateFlag = 0;

	/*scaleBtn.addEventListener('click', function() {
		if (scaleFlag == 0){
			scaleFlag = 1;
			maf3.setAttribute("scale", scale="1 1 1");
		} else if (scaleFlag == 1) {
			scaleFlag = 0;
			maf3.setAttribute("scale", scale=".55 .55 .55");
		}
	});*/

	scaleBtn.addEventListener('click', function() {
		if (rotateFlag == 0){
			maf3.emit('rotate');
			rotateFlag = 1;
			//material="color: red"attribute="rotation" begin="rotate" end="endRotate" dur="26000" fill="forwards" to="0 270 0" repeat="indefinite" easing="linear"
			//maf3.setAttribute('animation',"property: rotation; type: color; to: blue; easing:"linear"; dur: 1500");
			maf3.setAttribute('animation','property: rotation; pauseEvents: rotation-pause; to: 0 360 0; loop: true; dur: 8000; dir:alternate');
			maf3.setAttribute('animation__2','property: scale; pauseEvents: rotation-pause;  to:1 1 1; loop: true; dur: 8000; dir:alternate');
			cel3.setAttribute('animation','property: scale; pauseEvents: rotation-pause;  to:.2 .2 .2; loop: true; dur: 8000; dir:alternate');
		} else {
			//maf3.emit('endRotate');
			maf3.emit('rotation-pause');
			rotateFlag = 0;
			maf3.setAttribute('animation','property: rotation; pauseEvents: rotation-pause;  to: 0 0 0; dur: 5000; dir:alternate');
			maf3.setAttribute('animation__2','property: scale;  pauseEvents: rotation-pause; to:.5 .5 .5; dur: 5000');
			cel3.setAttribute('animation','property: scale;  pauseEvents: rotation-pause; to:.5 .5 .5; dur: 5000');
		}
	});
}

</script>
<style type="text/css">
.btns-wrap {
  font-family: 'Roboto', sans-serif;
  bottom: 20px;
  left: 20px;
  position: absolute;
  display: flex;
  flex-direction: row;
  z-index: 9998;
}
.btn {
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  cursor: pointer;
  box-sizing: border-box;
  margin: 18px;
  border-radius: 1000px;
  width: 60px;
  height: 60px;
  background: #f45;
  display: inline-block;
  text-align: center;
  padding: 17px 20px;
  transition: all 0.2s;
}
.scale {
  background-color: #f02853;
  background-image: url("i/ic_zoom_in_white_24px.svg");
  background-size: 60%;
  background-repeat: no-repeat;
  background-position: center;
  -webkit-transform: scale(1);
          transform: scale(1);
}
</style>
</head>
<body style="margin: 0px; overflow: hidden;">

<div class="btns-wrap">
	<div id="btn-scale" class="btn scale"></div>
</div>

<a-scene embedded vr-mode-ui="enabled: false;" cursor="rayOrigin: mouse" arjs="debugUIEnabled: false; trackingMethod: best; ">


	<a-assets>
			<img id="chart32" src="i/chart32.png">
			<img id="chart33" src="i/chart33.png">
			<img id="chart34" src="i/chart34.png">
			<img id="chart35" src="i/chart35.png">
			<img id="chart36" src="i/chart36.png">
	</a-assets>
    
	<a-entity id="mouseCursor" cursor="rayOrigin: mouse" raycaster="objects: .intersectable; useWorldCoordinates: true;"></a-entity>
						
	<a-marker type="pattern" url="data/pattern-cel01.patt" rotation="60 0 0">
        
        <a-entity foo>
            <a-entity id="maf3" scale="0.55 0.55 0.55">
                <a-entity id="" rotation="90 0 0" position="0 .5 -1.4" scale="1 1 1">
                        <a-image src="#chart33" rotation="0 0 0" position="0 0 0" visible="" material="" geometry="" scale="1 1 1">
                </a-entity>
                <a-entity id="" rotation="90 0 0" position="1.4 0 -.4" scale="1 1 1">
                        <a-image src="#chart34" rotation="0 0 0" position="0 0 0" visible="" material="" geometry="" scale="1 1 1">
                </a-entity>
                <a-entity id="" rotation="90 0 0" position="-1.4 0 -.4" scale="1 1 1">
                        <a-image src="#chart35" rotation="0 0 0" position="0 0 0" visible="" material="" geometry="" scale="1 1 1">
                </a-entity>
                <a-entity id="" rotation="90 0 0" position="0 0 1.1" scale="1 1 1">
                        <a-image src="#chart36" rotation="0 0 0" position="0 0 0" visible="" material="" geometry="" scale="1 1 1">
                </a-entity>
                <a-animation attribute="rotation" begin="rotate" end="endRotate" dur="26000" fill="forwards" to="0 270 0" repeat="indefinite" easing="linear"></a-animation>
            </a-entity>

            <a-entity id="cel3" position="0 .2 -.3" scale=".5 .5 .5" logoCelepar>
                    <a-box color="#EF2D5E" position="0 1 -2" change-color-on-hover="color: blue"></a-box>
                <a-cylinder color="#FFFFFF" height=".2" radius="1.2" segments-radial="360" position="0 0.2 .22" material="opacity: 0.94;"></a-cylinder>

                <a-entity position="0 -.8 0">
                    <a-box position="0 1.21 0.19" width=".074" height=".864" rotation="0 90 90" color="#a1a19c"></a-box>
                    <a-cylinder color="#a1a19c" height=".12" radius=".44" segments-radial="360" position="-0.5 1.2 0.2"></a-cylinder>
                    <a-cylinder color="#a1a19c" height=".12" radius=".44" segments-radial="360" position="0.5 1.2 0.2"></a-cylinder>
                    <a-cylinder id="klop" begin="bar" animation="startEvents: bar" color="#650858" height=".13" radius=".44" segments-radial="360" position="-0.5 1.35 0.2"></a-cylinder>
                    <a-cylinder color="#ea5153" height=".13" radius=".44" segments-radial="360" position="0.5 1.35 0.2"></a-cylinder>
                </a-entity>
            </a-entity>
        </a-entity>

    </a-marker>
    
    
    <a-entity camera><a-cursor></a-cursor></a-entity>
    
</a-scene>
</body>
</html>